var $jscomp={scope:{},findInternal:function(a,e,c){a instanceof String&&(a=String(a));for(var b=a.length,d=0;d<b;d++){var q=a[d];if(e.call(c,q,d,a))return{i:d,v:q}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,c,b){if(e){c=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var d=a[b];d in c||(c[d]={});c=c[d]}a=a[a.length-1];b=c[a];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
(function(a){a.fn.extend({BlackAndWhite:function(e){var c=this,b=a.extend({hoverEffect:!0,webworkerPath:!1,invertHoverEffect:!1,speed:500,onImageReady:null,intensity:1,crossOrigin:!0},e),d=b.hoverEffect;e=b.webworkerPath;var q=b.invertHoverEffect,n="number"===typeof b.intensity&&1>b.intensity&&0<b.intensity?b.intensity:1,A=a.isPlainObject(b.speed)?b.speed.fadeIn:b.speed,B=a.isPlainObject(b.speed)?b.speed.fadeOut:b.speed,y=a(window),C=" -webkit- -moz- -o- -ms- ".split(" "),t={},w=function(){var a=
document.createElement("div");a.style.cssText=C.join("filter:blur(2px); ");return!!a.style.length&&(void 0===document.documentMode||9<document.documentMode)}(),v=!!document.createElement("canvas").getContext,D="undefined"!==typeof Worker?!0:!1,E=function(a){if(t[a]||""===t[a])return t[a]+a;var b=document.createElement("div"),h=" Moz Webkit O ms Khtml".split(" "),c;for(c in h)if("undefined"!==typeof b.style[h[c]+a])return t[a]=h[c],h[c]+a;return a.toLowerCase()}("Filter"),u=[],m=D&&e?new Worker(e+
"BnWWorker.js"):!1,F=function(b){a(b.currentTarget).find(".BWfade").stop(!0,!0).animate({opacity:q?0:1},B)},G=function(b){a(b.currentTarget).find(".BWfade").stop(!0,!0).animate({opacity:q?1:0},A)},x=function(a){if("function"===typeof b.onImageReady)b.onImageReady(a)},r=function(){u.length?(m.postMessage({imgData:u[0].imageData,intensity:n}),m.onmessage=function(a){u[0].ctx.putImageData(a.data,0,0);x(u[0].img);u.splice(0,1);r()}):(m.terminate&&m.terminate(),m.close&&m.close())},H=function(a){return a.complete||
"undefined"!==typeof a.naturalWidth&&a.naturalWidth},z=function(c,e){var l=c[0],p=c.position(),p={top:p.top,left:p.left,position:"absolute","-webkit-transform":"translate3d(0,0,0)",opacity:q?0:1},f;b.crossOrigin&&(l.crossOrigin="anonymous");if(v&&!w){f=a('<canvas width="'+l.naturalWidth+'" height="'+l.naturalHeight+'" class="BWfade"></canvas>');p.width=c.width();p.height=c.height();var d=f.get(0),h=l.naturalWidth,g=l.naturalHeight,d=d.getContext("2d"),k=0;d.drawImage(l,0,0,h,g);var h=d.getImageData(0,
0,h,g),g=h.data,t=g.length;if(m)u.push({imageData:h,ctx:d,img:l});else{for(;k<t;k+=4){var r=.3*g[k]+.59*g[k+1]+.11*g[k+2];g[k]=~~(r*n+g[k]*(1-n));g[k+1]=~~(r*n+g[k+1]*(1-n));g[k+2]=~~(r*n+g[k+2]*(1-n))}d.putImageData(h,0,0);x(l)}}else v?p[E]="grayscale("+100*n+"%)":p.filter="progid:DXImageTransform.Microsoft.BasicImage(grayscale=1)",f=c.clone().addClass("BWFilter BWfade"),x(l);f.css(p).prependTo(e);!a.support.opacity&&q&&f.animate({opacity:0},0)},I=function(){c.each(function(c,b){var d=a(b).find("img"),
e=a(d).width(),d=a(d).height();a(this).find("canvas").css({width:e,height:d})})};(function(){var b=c.find("img").filter(function(){return!a(this).data("_b&w")}).length;c.each(function(c,d){var e=a(d),f=e.find("img");f.data("_b&w")||(H(f[0])?(b--,z(f,e)):f.on("load",function(){f.data("_b&w_loaded")||!f[0].complete?setTimeout(function(){f.load()},20):(z(f,e),f.data("_b&w_loaded",!0),b--,m&&v&&!w&&!b&&r())}).load(),f.data("_b&w",!0))});m&&v&&!w&&!b&&r();if(d)c.unbind(".BlackAndWhite").on("mouseleave.BlackAndWhite",
F).on("mouseenter.BlackAndWhite",G);if(v&&!w)y.unbind(".BlackAndWhite").on("resize.BlackAndWhite orientationchange.BlackAndWhite",I)})();return{destroy:function(){c.off(".BlackAndWhite");y.off(".BlackAndWhite")}}}})})(jQuery);
